{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"query\", \"error\", \"warn\"]\r\n        : [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO,GAC1B;AACR;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/auth.ts"],"sourcesContent":["import { PrismaAdapter } from \"@auth/prisma-adapter\";\r\nimport { type GetServerSidePropsContext } from \"next\";\r\nimport {\r\n  getServerSession,\r\n  type DefaultSession,\r\n  type NextAuthOptions,\r\n} from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { prisma } from \"@/lib/prisma\"; // Zakładamy, że masz ten plik dla klienta Prismy\r\n\r\n/**\r\n * Rozszerzenie sesji i użytkownika NextAuth, aby bezpiecznie przechowywać userId.\r\n * @see https://next-auth.js.org/configuration/nextjs\r\n */\r\ndeclare module \"next-auth\" {\r\n  interface Session extends DefaultSession {\r\n    user: DefaultSession[\"user\"] & {\r\n      id: string;\r\n    };\r\n  }\r\n\r\n  interface User {\r\n    id: string;\r\n  }\r\n}\r\n\r\n/**\r\n * Opcje konfiguracji dla NextAuth.js.\r\n * @see https://next-auth.js.org/configuration/options\r\n */\r\nexport const authOptions: NextAuthOptions = {\r\n  // 1. Adapter Prisma do zarządzania danymi użytkowników w bazie\r\n  adapter: PrismaAdapter(prisma), \r\n\r\n  // 2. Konfiguracja strategii sesji (używamy JWT dla bezpieczeństwa i bezstanowości)\r\n  session: {\r\n    strategy: \"jwt\",\r\n  },\r\n  \r\n  // 3. Konfiguracja dostawców (Providers)\r\n  providers: [\r\n    // Dostawca Logowania/Rejestracji poprzez email/hasło (CredentialsProvider)\r\n    CredentialsProvider({\r\n      name: \"Credentials\",\r\n      credentials: {\r\n        email: { label: \"Email\", type: \"email\" },\r\n        password: { label: \"Hasło\", type: \"password\" },\r\n      },\r\n      async authorize(credentials) {\r\n        if (!credentials?.email || !credentials.password) {\r\n          return null;\r\n        }\r\n\r\n        // Sprawdzenie, czy użytkownik istnieje\r\n        const user = await prisma.user.findUnique({\r\n          where: {\r\n            email: credentials.email,\r\n          },\r\n        });\r\n\r\n        if (!user || !user.hashedPassword) {\r\n          return null;\r\n        }\r\n\r\n        // Weryfikacja hasła\r\n        const isPasswordValid = await bcrypt.compare(\r\n          credentials.password,\r\n          user.hashedPassword,\r\n        );\r\n\r\n        if (!isPasswordValid) {\r\n          return null;\r\n        }\r\n\r\n        // Jeśli wszystko poprawne, zwracamy użytkownika (NextAuth go zautoryzuje)\r\n        return user;\r\n      },\r\n    }),\r\n    // Możesz dodać GoogleProvider, GitHubProvider itp.\r\n  ],\r\n  \r\n  // 4. Konfiguracja Callbacks, aby dodać userId do sesji\r\n  callbacks: {\r\n    session: ({ session, token }) => {\r\n      // W przypadku strategii \"jwt\", user.id jest przekazywane przez token\r\n      if (token && session.user) {\r\n        session.user.id = token.sub as string;\r\n      }\r\n      return session;\r\n    },\r\n    jwt: async ({ token, user }) => {\r\n        // W przypadku logowania przez Credentials, NextAuth przekazuje pełny obiekt user, \r\n        // ale w kolejnych wywołaniach mamy tylko token\r\n        if (user) {\r\n          token.sub = user.id;\r\n        }\r\n        return token;\r\n    },\r\n  },\r\n  \r\n  // 5. Ustawienia stron\r\n  pages: {\r\n    signIn: \"/login\", // Przekierowanie na stronę logowania\r\n    error: \"/login\", // Przekierowanie do logowania w przypadku błędu\r\n  },\r\n};\r\n\r\n/**\r\n * Wygodna funkcja do użycia w komponentach po stronie serwera (Server Components/Actions)\r\n */\r\nexport function getServerAuthSession(ctx: {\r\n  req: GetServerSidePropsContext[\"req\"];\r\n  res: GetServerSidePropsContext[\"res\"];\r\n}) {\r\n  return getServerSession(ctx.req, ctx.res, authOptions);\r\n}"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAKA;AACA;AACA,0NAAuC,iDAAiD;;;;;;AAsBjF,MAAM,cAA+B;IAC1C,+DAA+D;IAC/D,SAAS,IAAA,oLAAa,EAAC,sIAAM;IAE7B,mFAAmF;IACnF,SAAS;QACP,UAAU;IACZ;IAEA,wCAAwC;IACxC,WAAW;QACT,2EAA2E;QAC3E,IAAA,kLAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAS,MAAM;gBAAW;YAC/C;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,YAAY,QAAQ,EAAE;oBAChD,OAAO;gBACT;gBAEA,uCAAuC;gBACvC,MAAM,OAAO,MAAM,sIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,cAAc,EAAE;oBACjC,OAAO;gBACT;gBAEA,oBAAoB;gBACpB,MAAM,kBAAkB,MAAM,2JAAM,CAAC,OAAO,CAC1C,YAAY,QAAQ,EACpB,KAAK,cAAc;gBAGrB,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,0EAA0E;gBAC1E,OAAO;YACT;QACF;KAED;IAED,uDAAuD;IACvD,WAAW;QACT,SAAS,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE;YAC1B,qEAAqE;YACrE,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;QACA,KAAK,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,mFAAmF;YACnF,+CAA+C;YAC/C,IAAI,MAAM;gBACR,MAAM,GAAG,GAAG,KAAK,EAAE;YACrB;YACA,OAAO;QACX;IACF;IAEA,sBAAsB;IACtB,OAAO;QACL,QAAQ;QACR,OAAO;IACT;AACF;AAKO,SAAS,qBAAqB,GAGpC;IACC,OAAO,IAAA,wKAAgB,EAAC,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE;AAC5C"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/components/logout-button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LogoutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call LogoutButton() from the server but LogoutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/mentor_main/components/logout-button.tsx <module evaluation>\",\n    \"LogoutButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,uRAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,0EACA","ignoreList":[0]}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/components/logout-button.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LogoutButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call LogoutButton() from the server but LogoutButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/mentor_main/components/logout-button.tsx\",\n    \"LogoutButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,uRAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,sDACA","ignoreList":[0]}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,qLAAO,EAAC,IAAA,4JAAI,EAAC;AACtB"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,sLAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,uLAAI,GAAG;IAE9B,qBACE,6PAAC;QACC,aAAU;QACV,WAAW,IAAA,iIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 295, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/components/main-nav.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n// Używamy aliasu '@' dla pewności importu\r\nimport { LogoutButton } from \"@/components/logout-button\"; \r\n\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { User } from \"lucide-react\"; \r\n\r\n/**\r\n * Komponent nawigacji serwerowej. \r\n * Pobiera stan sesji i dynamicznie wyświetla linki logowania/wylogowania.\r\n */\r\nexport async function MainNav({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLElement>) {\r\n  // Pobieramy sesję bezpośrednio w komponencie serwerowym\r\n  const session = await getServerSession(authOptions);\r\n  const user = session?.user;\r\n\r\n  return (\r\n    <nav\r\n      className={cn(\"flex items-center space-x-4 lg:space-x-6 px-6 h-16 border-b bg-white dark:bg-gray-950\", className)}\r\n      {...props}\r\n    >\r\n      {/* Logo/Nazwa Aplikacji */}\r\n      <Link href=\"/\" className=\"flex items-center space-x-2 mr-6\">\r\n        <span className=\"text-xl font-bold text-primary\">MentorCode</span>\r\n      </Link>\r\n\r\n      {/* Główne linki nawigacji */}\r\n      <div className=\"flex-1 flex space-x-4\">\r\n        {user && (\r\n          // Link do Dashboardu tylko dla zalogowanych\r\n          <Link href=\"/dashboard\" className=\"text-sm font-medium transition-colors hover:text-primary\">\r\n            Dashboard\r\n          </Link>\r\n        )}\r\n        <Link href=\"/\" className=\"text-sm font-medium transition-colors hover:text-primary\">\r\n            Strona Główna\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Sekcja Uwierzytelniania */}\r\n      <div className=\"flex items-center space-x-4\">\r\n        {user ? (\r\n          // STAN ZALOGOWANY: Imię/Email i Wylogowanie\r\n          <>\r\n            <div className=\"flex items-center space-x-1 text-sm font-medium\">\r\n              <User className=\"h-4 w-4 mr-1 text-gray-500\" />\r\n              <span>{user.name || user.email || \"Użytkownik\"}</span>\r\n            </div>\r\n            <LogoutButton />\r\n          </>\r\n        ) : (\r\n          // STAN NIEZALOGOWANY: Logowanie i Rejestracja\r\n          <>\r\n            <Button asChild variant=\"ghost\">\r\n              <Link href=\"/login\">Zaloguj się</Link>\r\n            </Button>\r\n            <Button asChild>\r\n              <Link href=\"/register\">Rejestracja</Link>\r\n            </Button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA,0CAA0C;AAC1C;AAEA;AACA;AACA;;;;;;;;;AAMO,eAAe,QAAQ,EAC5B,SAAS,EACT,GAAG,OAC+B;IAClC,wDAAwD;IACxD,MAAM,UAAU,MAAM,IAAA,wKAAgB,EAAC,yIAAW;IAClD,MAAM,OAAO,SAAS;IAEtB,qBACE,6PAAC;QACC,WAAW,IAAA,iIAAE,EAAC,yFAAyF;QACtG,GAAG,KAAK;;0BAGT,6PAAC,yMAAI;gBAAC,MAAK;gBAAI,WAAU;0BACvB,cAAA,6PAAC;oBAAK,WAAU;8BAAiC;;;;;;;;;;;0BAInD,6PAAC;gBAAI,WAAU;;oBACZ,QACC,4CAA4C;kCAC5C,6PAAC,yMAAI;wBAAC,MAAK;wBAAa,WAAU;kCAA2D;;;;;;kCAI/F,6PAAC,yMAAI;wBAAC,MAAK;wBAAI,WAAU;kCAA2D;;;;;;;;;;;;0BAMtF,6PAAC;gBAAI,WAAU;0BACZ,OACC,4CAA4C;8BAC5C;;sCACE,6PAAC;4BAAI,WAAU;;8CACb,6PAAC,yNAAI;oCAAC,WAAU;;;;;;8CAChB,6PAAC;8CAAM,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI;;;;;;;;;;;;sCAEpC,6PAAC,8JAAY;;;;;;mCAGf,8CAA8C;8BAC9C;;sCACE,6PAAC,oJAAM;4BAAC,OAAO;4BAAC,SAAQ;sCACtB,cAAA,6PAAC,yMAAI;gCAAC,MAAK;0CAAS;;;;;;;;;;;sCAEtB,6PAAC,oJAAM;4BAAC,OAAO;sCACb,cAAA,6PAAC,yMAAI;gCAAC,MAAK;0CAAY;;;;;;;;;;;;;;;;;;;;;;;;AAOrC"}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/app/dashboard/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\"; // Import konfiguracji NextAuth\r\nimport { MainNav } from \"@/components/main-nav\"; // Będziemy używać głównej nawigacji\r\n\r\n/**\r\n * Główna strona aplikacji (Dashboard), dostępna tylko dla zalogowanych użytkowników.\r\n */\r\nexport default async function DashboardPage() {\r\n  // 1. Zabezpieczenie strony: Pobieramy dane sesji na serwerze\r\n  const session = await getServerSession(authOptions);\r\n\r\n  // 2. Jeśli sesja nie istnieje (użytkownik nie jest zalogowany), przekierowujemy do /login\r\n  if (!session?.user) {\r\n    redirect(\"/login\");\r\n  }\r\n\r\n  // W tej sekcji wyświetlamy zawartość pulpitu\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      {/* Używamy MainNav, który teraz zawiera logikę Logowanie/Wylogowanie */}\r\n      <MainNav /> \r\n      <main className=\"flex flex-col flex-grow items-center justify-center p-8 bg-gray-50 dark:bg-gray-900 text-center\">\r\n        <h1 className=\"text-4xl font-extrabold text-primary mb-4\">\r\n          Witaj na Pulpicie, {session.user.name || session.user.email}!\r\n        </h1>\r\n        <p className=\"mt-4 text-lg text-gray-700 dark:text-gray-300 max-w-2xl\">\r\n          To jest Twój prywatny obszar roboczy. Możesz teraz korzystać ze wszystkich funkcji MentorCode AI.\r\n        </p>\r\n        <p className=\"mt-8 text-sm text-gray-500 dark:text-gray-400\">\r\n          Strona jest chroniona – nikt niezalogowany nie ma do niej dostępu.\r\n        </p>\r\n      </main>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA,sNAA0C,+BAA+B;AACzE,iPAAiD,oCAAoC;;;;;;AAKtE,eAAe;IAC5B,6DAA6D;IAC7D,MAAM,UAAU,MAAM,IAAA,wKAAgB,EAAC,yIAAW;IAElD,0FAA0F;IAC1F,IAAI,CAAC,SAAS,MAAM;QAClB,IAAA,gNAAQ,EAAC;IACX;IAEA,6CAA6C;IAC7C,qBACE,6PAAC;QAAI,WAAU;;0BAEb,6PAAC,oJAAO;;;;;0BACR,6PAAC;gBAAK,WAAU;;kCACd,6PAAC;wBAAG,WAAU;;4BAA4C;4BACpC,QAAQ,IAAI,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,KAAK;4BAAC;;;;;;;kCAE9D,6PAAC;wBAAE,WAAU;kCAA0D;;;;;;kCAGvE,6PAAC;wBAAE,WAAU;kCAAgD;;;;;;;;;;;;;;;;;;AAMrE"}}]
}