{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"query\", \"error\", \"warn\"]\r\n        : [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO,GAC1B;AACR;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/auth.ts"],"sourcesContent":["import { PrismaAdapter } from \"@auth/prisma-adapter\";\r\nimport { type GetServerSidePropsContext } from \"next\";\r\nimport {\r\n  getServerSession,\r\n  type DefaultSession,\r\n  type NextAuthOptions,\r\n} from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { prisma } from \"@/lib/prisma\"; // Zakładamy, że masz ten plik dla klienta Prismy\r\n\r\n/**\r\n * Rozszerzenie sesji i użytkownika NextAuth, aby bezpiecznie przechowywać userId.\r\n * @see https://next-auth.js.org/configuration/nextjs\r\n */\r\ndeclare module \"next-auth\" {\r\n  interface Session extends DefaultSession {\r\n    user: DefaultSession[\"user\"] & {\r\n      id: string;\r\n    };\r\n  }\r\n\r\n  interface User {\r\n    id: string;\r\n  }\r\n}\r\n\r\n/**\r\n * Opcje konfiguracji dla NextAuth.js.\r\n * @see https://next-auth.js.org/configuration/options\r\n */\r\nexport const authOptions: NextAuthOptions = {\r\n  // 1. Adapter Prisma do zarządzania danymi użytkowników w bazie\r\n  adapter: PrismaAdapter(prisma), \r\n\r\n  // 2. Konfiguracja strategii sesji (używamy JWT dla bezpieczeństwa i bezstanowości)\r\n  session: {\r\n    strategy: \"jwt\",\r\n  },\r\n  \r\n  // 3. Konfiguracja dostawców (Providers)\r\n  providers: [\r\n    // Dostawca Logowania/Rejestracji poprzez email/hasło (CredentialsProvider)\r\n    CredentialsProvider({\r\n      name: \"Credentials\",\r\n      credentials: {\r\n        email: { label: \"Email\", type: \"email\" },\r\n        password: { label: \"Hasło\", type: \"password\" },\r\n      },\r\n      async authorize(credentials) {\r\n        if (!credentials?.email || !credentials.password) {\r\n          return null;\r\n        }\r\n\r\n        // Sprawdzenie, czy użytkownik istnieje\r\n        const user = await prisma.user.findUnique({\r\n          where: {\r\n            email: credentials.email,\r\n          },\r\n        });\r\n\r\n        if (!user || !user.hashedPassword) {\r\n          return null;\r\n        }\r\n\r\n        // Weryfikacja hasła\r\n        const isPasswordValid = await bcrypt.compare(\r\n          credentials.password,\r\n          user.hashedPassword,\r\n        );\r\n\r\n        if (!isPasswordValid) {\r\n          return null;\r\n        }\r\n\r\n        // Jeśli wszystko poprawne, zwracamy użytkownika (NextAuth go zautoryzuje)\r\n        return user;\r\n      },\r\n    }),\r\n    // Możesz dodać GoogleProvider, GitHubProvider itp.\r\n  ],\r\n  \r\n  // 4. Konfiguracja Callbacks, aby dodać userId do sesji\r\n  callbacks: {\r\n    session: ({ session, token }) => {\r\n      // W przypadku strategii \"jwt\", user.id jest przekazywane przez token\r\n      if (token && session.user) {\r\n        session.user.id = token.sub as string;\r\n      }\r\n      return session;\r\n    },\r\n    jwt: async ({ token, user }) => {\r\n        // W przypadku logowania przez Credentials, NextAuth przekazuje pełny obiekt user, \r\n        // ale w kolejnych wywołaniach mamy tylko token\r\n        if (user) {\r\n          token.sub = user.id;\r\n        }\r\n        return token;\r\n    },\r\n  },\r\n  \r\n  // 5. Ustawienia stron\r\n  pages: {\r\n    signIn: \"/login\", // Przekierowanie na stronę logowania\r\n    error: \"/login\", // Przekierowanie do logowania w przypadku błędu\r\n  },\r\n};\r\n\r\n/**\r\n * Wygodna funkcja do użycia w komponentach po stronie serwera (Server Components/Actions)\r\n */\r\nexport function getServerAuthSession(ctx: {\r\n  req: GetServerSidePropsContext[\"req\"];\r\n  res: GetServerSidePropsContext[\"res\"];\r\n}) {\r\n  return getServerSession(ctx.req, ctx.res, authOptions);\r\n}"],"names":[],"mappings":";;;;;;AAAA;AAEA;AAKA;AACA;AACA,8NAAuC,iDAAiD;;;;;;AAsBjF,MAAM,cAA+B;IAC1C,+DAA+D;IAC/D,SAAS,IAAA,sLAAa,EAAC,wIAAM;IAE7B,mFAAmF;IACnF,SAAS;QACP,UAAU;IACZ;IAEA,wCAAwC;IACxC,WAAW;QACT,2EAA2E;QAC3E,IAAA,oLAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAS,MAAM;gBAAW;YAC/C;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,YAAY,QAAQ,EAAE;oBAChD,OAAO;gBACT;gBAEA,uCAAuC;gBACvC,MAAM,OAAO,MAAM,wIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBACL,OAAO,YAAY,KAAK;oBAC1B;gBACF;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,cAAc,EAAE;oBACjC,OAAO;gBACT;gBAEA,oBAAoB;gBACpB,MAAM,kBAAkB,MAAM,6JAAM,CAAC,OAAO,CAC1C,YAAY,QAAQ,EACpB,KAAK,cAAc;gBAGrB,IAAI,CAAC,iBAAiB;oBACpB,OAAO;gBACT;gBAEA,0EAA0E;gBAC1E,OAAO;YACT;QACF;KAED;IAED,uDAAuD;IACvD,WAAW;QACT,SAAS,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE;YAC1B,qEAAqE;YACrE,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACzB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;QACA,KAAK,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,mFAAmF;YACnF,+CAA+C;YAC/C,IAAI,MAAM;gBACR,MAAM,GAAG,GAAG,KAAK,EAAE;YACrB;YACA,OAAO;QACX;IACF;IAEA,sBAAsB;IACtB,OAAO;QACL,QAAQ;QACR,OAAO;IACT;AACF;AAKO,SAAS,qBAAqB,GAGpC;IACC,OAAO,IAAA,0KAAgB,EAAC,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE;AAC5C"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\n// Inicjalizacja handlera NextAuth z naszymi opcjami\r\nconst handler = NextAuth(authOptions);\r\n\r\n// W App Routerze (app directory) musimy eksportować nazwane funkcje obsługujące metody HTTP.\r\n// NextAuth obsługuje zarówno GET jak i POST.\r\nexport { handler as GET, handler as POST };"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,oDAAoD;AACpD,MAAM,UAAU,IAAA,iKAAQ,EAAC,2IAAW"}}]
}