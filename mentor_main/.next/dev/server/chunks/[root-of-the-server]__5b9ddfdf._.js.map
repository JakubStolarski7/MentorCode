{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"query\", \"error\", \"warn\"]\r\n        : [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KACE,uCACI;QAAC;QAAS;QAAS;KAAO,GAC1B;AACR;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///D:/MentorCode/mentor_main/app/api/register/route.ts"],"sourcesContent":["import { prisma } from \"@/lib/prisma\";\r\nimport { NextResponse } from \"next/server\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { z } from \"zod\";\r\n\r\nconst userSchema = z.object({\r\n  name: z.string().min(3, \"Imię musi mieć co najmniej 3 znaki.\"),\r\n  email: z.string().email(\"Nieprawidłowy adres email.\"),\r\n  password: z.string().min(8, \"Hasło musi mieć co najmniej 8 znaków.\"),\r\n});\r\n\r\n// WAŻNE: W App Routerze (app/api/...) NIE używamy \"export default function handler\".\r\n// Musimy używać nazwanych eksportów dla metod HTTP, np. \"export async function POST\".\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n\r\n    // Walidacja danych\r\n    const validation = userSchema.safeParse(body);\r\n    if (!validation.success) {\r\n      return NextResponse.json(\r\n        {\r\n          error: \"Błąd walidacji danych\",\r\n          details: validation.error.format(),\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const { name, email, password } = validation.data;\r\n\r\n    // Sprawdzenie, czy użytkownik już istnieje\r\n    const existingUser = await prisma.user.findUnique({\r\n      where: { email },\r\n    });\r\n\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { error: \"Użytkownik o tym emailu już istnieje.\" },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Hashowanie hasła\r\n    const salt = await bcrypt.genSalt(10);\r\n    const hashedPassword = await bcrypt.hash(password, salt);\r\n\r\n    // Utworzenie użytkownika\r\n    // Uwaga: Używamy hashedPassword zgodnie z Twoim schematem Prisma\r\n    await prisma.user.create({\r\n      data: {\r\n        name,\r\n        email,\r\n        hashedPassword, \r\n      },\r\n    });\r\n\r\n    return NextResponse.json(\r\n      { message: \"Rejestracja zakończona sukcesem.\" },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Błąd rejestracji:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Wystąpił błąd serwera podczas rejestracji.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,aAAa,wLAAC,CAAC,MAAM,CAAC;IAC1B,MAAM,wLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,wLAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,wLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAKO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,mBAAmB;QACnB,MAAM,aAAa,WAAW,SAAS,CAAC;QACxC,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO,+JAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,WAAW,KAAK,CAAC,MAAM;YAClC,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,WAAW,IAAI;QAEjD,2CAA2C;QAC3C,MAAM,eAAe,MAAM,wIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAChD,OAAO;gBAAE;YAAM;QACjB;QAEA,IAAI,cAAc;YAChB,OAAO,+JAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,mBAAmB;QACnB,MAAM,OAAO,MAAM,6JAAM,CAAC,OAAO,CAAC;QAClC,MAAM,iBAAiB,MAAM,6JAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,yBAAyB;QACzB,iEAAiE;QACjE,MAAM,wIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACvB,MAAM;gBACJ;gBACA;gBACA;YACF;QACF;QAEA,OAAO,+JAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAmC,GAC9C;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,+JAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6C,GACtD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}